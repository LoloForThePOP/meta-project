{% extends 'base.html.twig' %}

{% block title %}Vous Contacter{% endblock %}

{% block sidebar %}{% include 'partials/sidebar.html.twig' %}{% endblock %}

{% block body %}

    <div class="container">
        
        <h3 class="my-3">Comment vous Contacter?</h3>

        <div class="col-md-6 h5 alert alert-dismissible alert-info">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Si vous ne souhaitez affichez aucune information de contact, les visiteurs peuvent vous contacter quand même avec la messagerie privée (vous pouvez aussi désactiver les messages privées dans les préférences).</strong>
          </div>
        
        <!-- Add a Contact Button -->
    
        <a href="{{ path('contact_new', {'slug': slug}) }}"><button class="btn btn-success btn-lg font-weight-bold px-4 py-3 mb-3 mr-3">+ Ajouter une Zone Contact</button></a>


        <div class="col-md-9 pl-0">

            <div class="table-responsive">

                <table class="table table-hover table-striped table-bordered">

                    <thead>

                        <tr>
                            <th>Titre du Contact</th>
                            <th>E-mail 1</th>
                            <th>Telephone 1</th>
                            <th>Adresse</th>
                        </tr>

                    </thead>

                    <tbody>

                    {% for contact in contacts %}

                        {% set showPath = path('contact_show', {'id': contact.id, 'slug': slug}) %}
                        {% set editPath = path('contact_edit', {'contact_id': contact.id, 'slug': slug}) %}
        
                        <tr class="cursor-pointer"  
                            
                            {% if app.user and app.user == presentation.creator %}
                                onclick="window.location='{{ editPath }}'";>
                            {% else %}
                                onclick="window.location='{{ showPath}}'";>
                            {% endif %}
                    
                            <td>{{ contact.title }}</td>
                            <td>{{ contact.email1 | slice (0,15) }} (...)</td>
                            <td>{{ contact.tel1 }}</td>
                            <td>{{ contact.postalMail }}</td>

                        </tr>

                    {% else %}

                        <tr>
                            <td colspan="9">Aucune Zone Contact pour l'Instant</td>
                        </tr>
                    {% endfor %}

                    </tbody>

                </table> 

            </div>
        </div>
            


    </div>

{% endblock %}
