{% extends 'base.html.twig' %}

{% block title %}Supprimer un Projet{% endblock %}

{% block body %}

    {#
        
        Processus :

            - we ask user to confirm presentation deletion by typing 'confirm'

            - we check if user typed 'confirm' (javascript)

            - if so, we trigger click on hidden link to project deletion route
        
    #}

    <div class="container pt-md-4">

        <div class="row mt-5">

            <div class="col-md-7">


                    <div class="h4 font-weight-bold mb-4">
                        Supprimer la présentation
                    </div>

                    <div class="">
                        
                        <h4 class="mb-4">

                            {{ presentation.goal | length > 32 ? presentation.goal | slice(0, 49) ~ '...' : presentation.goal }}
                        </h4>
                        
                    </div>  

                    <div>

                        {# First Confirmation Button #}

                        <button onclick="confirmDeletion()" type="button" class="btn btn-danger sharp font-weight-bold mr-2">Supprimer</button>

                            <a id="deleteProjectLink" class="d-none" href="{{ path('project_delete', {'slug':presentation.slug}) }}">ok</a>

                        {# Back Button #}

                        <a class="text-decoration-none text-white" href="{{ path('edit_presentation_menu', {'slug': presentation.slug }) }}">
                            
                            <button type="button" class="btn btn-info sharp font-weight-bold mr-2">Retour</button>
                        
                        </a>

                        



                    </div>

                </div>


            </div>


        </div>

    </div>

{% endblock %}

{% block javascripts %}

    <script>

        function confirmDeletion() {

            var userConfirmation = prompt("Attention, cette action est irréversible. Pour confirmer, écrire confirmer", "écrire ici");

            if (userConfirmation == "confirmer" || userConfirmation == "Confirmer") {
                
                document.getElementById("deleteProjectLink").click();
            } 

        }

    </script>

{% endblock %}