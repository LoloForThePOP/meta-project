{% extends 'base.html.twig' %}


{% block meta %}

    <meta name="author" content="{{ presentation.creator.name }}">
    <meta name="keywords" content="{{ presentation.keywords }}">
    <meta name="date" content="{{ presentation.createdAt | date}}">
    
{% endblock %}
    

{% block title %}{{ presentation.goal | capitalize}}{% endblock %}

{% block sidebar %} 

    {% if app.user and app.user == presentation.creator %}
    
        {% include 'partials/sidebar.html.twig' %} 

    {% endif %}
    
{% endblock %}


{% block body %}


<style>

    .pp-struct-container {

        padding-left:20px;
        padding-top:18px;
        margin-bottom:35px;

        -webkit-box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15) !important;
        -moz-box-shadow:  0 0.5rem 1rem rgba(0,0,0,0.15) !important;
        box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15) !important;
    
}

.pp-struct-container li, .pp-struct-container li:hover, .pp-struct-container td:hover, .pp-struct-container a:hover {

        background-color :  #e6e4ff;

    }

    
    .pp-whole-container {

        background-color :  #eff4ff;
 
     }
     
    .pp-upper-box-container{

    border-radius:4px;

    border-left: 6px solid #ffa500;
    border-bottom: 6px solid #ffa500;

   
    }
    
    .pp-struct-container {

        background-color : #e6e4ff;
 
     }

     
    .pp-struct-title{

        color : navy;
        font-family : Verdana, Geneva, Tahoma, sans-serif;
        

    }


    .pp-contact-us-card, .pp-contact-us-card a {

      background-color : white !important;

    }

    .pp-website-card, .pp-website-card > * {

        background-color: #fafafa;
    }

    .pp-private-message-card, .pp-private-message-card a {

      background-color : white !important;

    }

    .pp-project-title{
        color:navy !important;
        font-weight:bold;
    }

    .pp-struct-needs {
        //background-color:yellowgreen;
    }

</style>


    <!-- Project Presentation Display Template -->

    <div class="pp-whole-container col-md-9 mt-md-5 pl-md-4 pt-3
    
    {# we center the presentation display when just in consultation mode #}

    {% if not app.user == presentation.creator %}
    
        container  

    {% endif %}
    
    
    ">

        <!-- upper box container (contains project title; goal; logo) -->

        <div class="row mb-3 mx-1">
            
                <div class="pp-upper-box-container row mb-md-3 mt-2 ml-0 mr-md-3 pl-3 pl-md-3 pb-4">

                    <!-- Title; Goal; Keywords Display -->

                    <div class="col-md-9 pr-4 mr-1">

                        <div class="row">
                                        
                            <!-- Project Title -->
                            {% include 'pp/partials/_title.html.twig' %}              

                        </div>

                        <div class="row">

                                                    
                            <!-- Project Goal -->

                            <div class="mb-2">

                                {% include 'pp/partials/_goal.html.twig' %}

                            </div>
                            
                            <!-- Project Keywords -->
                            {% include 'pp/partials/_keywords.html.twig' %}
                            
                        </div>

                    </div>

                    <!-- Logo Display -->

                    <div class="col-rest pl-1">
                        
                        <!-- Project Logo -->
                        {% include 'pp/partials/_logo.html.twig' %}
                        
                    </div>

            </div>


        </div>


        <div class="row pt-2 pl-md-2">

            <div class="col-md-12 pr-md-5 mb-3 pb-3" style="border-radius:4px !important;">
                
                
                <!-- Project Slideshow Pitch -->
                {% include 'pp/partials/_slideshow.html.twig' %}
                
                <!-- Project Text Description -->
                {% include 'pp/partials/_textDescription.html.twig' %}
                
                <!-- Project Questions & Answers -->
                {% include 'pp/partials/_questionAnswer.html.twig' %}

                <!-- Project Needs -->
                {% include 'pp/partials/_needs.html.twig' %}

                <!-- Project Websites -->
                {% include 'pp/partials/_websites.html.twig' %}
                
                <!-- Project Geographic Domains -->
                {% include 'pp/partials/_geoDomains.html.twig' %}

                <!-- Project Contact Us Cards & Private Message Button -->
                {% include 'pp/partials/_contactUs.html.twig' %}


                    <div class="mt-5 mb-3">

                        <!-- Display Some Metadatas -->
                        {% include 'pp/partials/_metadataDisplay.html.twig' %}

                        <!-- some buttons (example : report abuse; save as pdf; ...) -->

                        <a href="{{ path('report_new', {'context': presentation.id ~ ' ' ~  presentation.slug}) }}">
                            <button type="button" class="btn btn-light">Signaler un abus</button>
                        </a>
                        
                    </div>

                    <!-- Project Provider Caps -->
                    {# {% include 'pp/partials/_projectPresenterArea.html.twig' %} #}



            </div>
        
        </div>


    </div>

{% endblock %}



{% block javascripts %}
       
    <script>

        $(document).ready(function(){

            // When Click on a Need Title, we display its details in a modal box

            $('#needsDisplayTable tbody').on('click', 'tr', function (){

                var needId = $(this).attr('id');
                var needTitle = $(this).attr('data-need-title');
                var needDate = $(this).attr('data-need-date');
                var needIsPaid = $(this).attr('data-need-isPaid');

                var loader =  '<div class="p-3"><div class="loader"></div></div>';

                //alert(needTitle);

                $('#titleNeedModal').html(needTitle);

                $('#dateNeedModal').html(needDate);

                $('#isPaidNeedModal').html(needIsPaid);

                $('#descriptionNeedModal').html(loader);
                
                // Get Need Details and Display These Details in a Modal

                
                $.ajax({  

                    url: "{{path('ajax_get_need_details', {'slug': presentation.slug}) }}",

                    type:       'POST',   

                    dataType:   'json',

                    data: {

                      "needId": needId,

                    },
    
                    async: true,  
                    
                    success: function(data, status) {
    
                        needDescription = data.needDescription;
    
                        $('#descriptionNeedModal').html(needDescription);
    
                                            
                    },  
    
                    error : function(xhr, textStatus, errorThrown) {  

                        alert('Ajax request failed.');  

                    }  

                 }); 


         
                


            });

        });

    </script>

{% endblock %}
