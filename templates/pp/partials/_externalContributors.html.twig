

<!-- External Contributors Presentation -->

{% if presentation.externalContributorsStructures | length > 0 %}

    <div id="externalContributorsDisplay" class="pp-struct-container">
        
        {% if is_granted('edit', presentation) %}
            
            <!-- Title Container with Edit Button -->

            <div class="pp-struct-title-container pp-edition-mode">

                <!-- Structure Title -->

                <h3 class="pp-struct-title">Contributions externes</h3>

                <!-- Edit Project External Contributors Button -->

                <a class="" href="{{ path('edit_presentation_menu', {'slug': presentation.slug }) }}">

                    <button class="btn btn-light sharp font-weight-bold mb-2 d-inline-block fs-15">Gérer</button>
                    
                </a>

            </div>

        {% endif %}

            <!-- ECS Display Container -->

            <div class="ecs-display-container pb-3" >
                    
                {% for ecs in presentation.externalContributorsStructures %}
                
                    <div class="each-ecs-container">


                        <div class="pp-struct-title-container mb-2 mb-md-3 mb-lg-4">
                                                        
                                {# Only First Occurence Has an Icon #}
                                    
                                    <!-- ECS Title Display (ex: Our Sponsors) -->

                                    <h3 class="pp-struct-title" style="margin-right:0px;">

                                        {% if loop.first %}

                                            <!-- Structure Icon -->

                                            <img class="pp-struct-icon" src="/images/icons/consult_presentation/external_contributors2.svg" height="29" width="29" alt="external contributors icon">

                                        {% endif %}

                                        {{ecs.title}}

                                    </h3>

                                    <!-- Edit this ECS Button -->

                                    {% if is_granted('edit', presentation) %}

                                        <a class="pp-edition-mode" href="{{ path('manage_ecs', {'slug':presentation.slug, 'id_ecs':ecs.id}) }}">

                                            <button class="btn btn-light sharp font-weight-bold d-inline fs-15">Gérer</button>
                                            
                                        </a>

                                    {% endif %}

                        </div>
                            
                        <!-- ECS Card Display (ex: Coca-Cola Logo; Mr Smith Picture; etc) -->
                        
                        {% if ecs.persorgs | length > 0 %}

                            <div class="container">
                                                    
                                <div class="ecsDisplayRow d-flex justify-content-start">

                                    {% include 'pp/partials/_external_contributors/_card_display.html.twig' %}

                                </div>

                            </div>
                            
                            <!-- ECS Details (Displayed in Modal Boxes) -->
                            
                            {% for persorg in ecs.persorgs %}

                                {% include 'pp/partials/_external_contributors/_modal_box.html.twig' %}

                            {% endfor %}

                        {% endif %} 

                        

                        <!-- ECS Rich Text Content Display -->
                        
                        {% if ecs.richTextContent is not null %}

                            {# managing long texts with display more button #}

                            {% set longText = false %}

                            {% if ecs.richTextContent  | length > 300 %}

                                {% set longText = true %}
        
                            {% endif %}

                                <div class="richTextContent col-md-10 pr-0 pl-2 px-md-2 px-lg-4">

                                    {% if longText %}
                                                                            
                                        <div  class="moduleCollapseText">

                                            <div id="collapseECSRichText{{ecs.id}}" class="ecs-text-description collapse" aria-expanded="false">

                                    {% endif %}

                                        {{ecs.richTextContent | raw}}
                                    
                                    {# closing long text container #}

                                    {% if longText %}

                                            </div>

                                            <!-- Toggle Collapse Button -->

                                            <div class="mt-4 mb-2">

                                                <button class="collapsed btn btn-primary btn-sm sharp font-weight-bold" data-toggle="collapse" data-target="#collapseECSRichText{{ecs.id}}"></button>
                                                
                                            </div>

                                        </div>                             
                                    
                                    {% endif %}

                                </div>

                        {% endif %}

                    </div>
                    
                {% endfor %}


            </div>

    </div>
    
    <!-- Styles External Contributors Display -->
    
    <style>
        
        .each-ecs-container{
            
            margin-bottom: 34px;

            padding-left: 2px;
        }
        
    
        .externalContributorCard {
    
            display: inline-block !important;
    
            width: 175px;
    
            min-height:175px; 
    
            margin-right : 10px;
    
            cursor: pointer;
    
            white-space:normal;
            overflow-x:auto;
        }
    
        .persorgName{

            padding-left :5px;
            padding-right: 5px;
            
            min-height:50px;

            text-align:center;
    
            font-weight: bold;
    
            margin-bottom: 7px;
    
            overflow-y: hidden;
    
        }
    
        .richTextContent{
            font-size:1.17em;
        }
    
        #externalContributorsDisplay .pp-struct-icon {
            margin-right: 7px;
            top: -3px;
            margin-left: 5px;
        }
  
        .moduleCollapseText button.collapsed:after {
            content: '+ Afficher Plus';
        }
        
        .moduleCollapseText button:not(.collapsed):after {
            content: '- Réduire';
        }
        
        .moduleCollapseText .ecs-text-description.collapse:not(.show) {
            
            display: block;
            
            height: 2.8em; /* height = lineheight * no of lines to display */

            overflow: hidden;

        }
        
        @media screen and (max-width: 580px) {

            .each-ecs-container{
            
                padding-left: 0px;
            }

            
            #externalContributorsDisplay .pp-struct-container {
               
                padding-right: 0px;
                padding-left: 7px;
            }
    
    
            /* One Letter Avatars */
    
            .avatar-circle {
                width: 82px;
                height: 82px;
            }
    
            
            .initials {
                position: relative;
                top: 20px; /* 25% of parent */
                font-size: 40px; /* 50% of parent */
                line-height: 40px; /* 50% of parent */
            }
    
    
            .ecsDisplayRow{
    
                overflow-x: auto;
                white-space: nowrap;
                overflow-y: hidden;
    
            }
    
            .richTextContent{
                font-size:15px !important;
                line-height: 21px;
            }

            #externalContributorsDisplay .pp-struct-icon {
                width: 18px;
                height: 18px;
                top: -3px;
                margin-right: 2px;
                margin-left:  2px;
            }
    
        }
    
    
    </style>

{% endif %}
